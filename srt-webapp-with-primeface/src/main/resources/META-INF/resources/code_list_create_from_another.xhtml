<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui" template="template.xhtml">

    <ui:define name="content">
        <div class="settings-next">
            <div class="subhead">
                <h2 class="subhead-heading">Create a code list from another</h2>
            </div>
        </div>
        <h:form id="form">
            <p:panel>
                <p:messages autoUpdate="true"/>
                <h:panelGrid id="grid0" columns="6" cellpadding="5">
                    <h:outputLabel for="desc" value="Based Code List"
                                   styleClass="search-label" style="font-weight:bold; color: #4078c0;"/>
                    <p:commandButton value="Search" icon="ui-icon-extlink"
                                     actionListener="#{codeListCreateFromAnotherBean.chooseBasedCode}">
                        <p:ajax event="dialogReturn" listener="#{codeListCreateFromAnotherBean.onBasedCodeChosen}"
                                update=":form:tbl"/>
                    </p:commandButton>
                </h:panelGrid>
                <h:panelGrid id="grid" columns="6" cellpadding="5">
                    <h:outputLabel for="name" value="Name:" styleClass="search-label"/>
                    <p:inputText id="name" value="#{codeListCreateFromAnotherBean.codeList.name}"
                                 label="Name"/>

                    <h:outputLabel for="definition" value="Definition:" styleClass="search-label"/>
                    <p:inputText id="definition" value="#{codeListCreateFromAnotherBean.codeList.definition}"
                                 label="Definition"/>

                    <h:outputLabel for="definitionSource" value="Definition Source:"
                                   styleClass="search-label"/>
                    <p:inputText id="definitionSource" value="#{codeListCreateFromAnotherBean.codeList.definitionSource}"
                                 label="Definition Source"/>

                    <h:outputLabel for="listId" value="List Id:" styleClass="search-label"/>
                    <p:inputText id="listId" value="#{codeListCreateFromAnotherBean.codeList.listId}"
                                 label="List Id"/>

                    <h:outputLabel for="agencyIdListValueId" value="Agency Id:" styleClass="search-label"/>
                    <p:inputText id="agencyIdListValueId" value="#{codeListCreateFromAnotherBean.codeList.agencyId}"
                                 label="Agency Id"/>

                    <h:outputLabel for="version" value="Version:" styleClass="search-label"/>
                    <p:inputText id="version" value="#{codeListCreateFromAnotherBean.codeList.versionId}"
                                 label="Version"/>

                    <h:outputLabel for="remark" value="Remark:" styleClass="search-label"/>
                    <p:inputText id="remark" value="#{codeListCreateFromAnotherBean.codeList.remark}"
                                 label="Remark"/>

                </h:panelGrid>
                <h:panelGrid columns="2" cellpadding="5">
                    <h:outputText style="font-weight:bold; color: #bd2c00;" value="Extensible? "/>
                    <p:selectBooleanCheckbox value="#{codeListCreateFromAnotherBean.codeList.extensible}"/>
                </h:panelGrid>
            </p:panel>
            <p:panel header="Code">
                <h:panelGrid id="grid2" columns="1" cellpadding="5">
                    <p:dataTable id="tbl" var="codeListValue" value="#{codeListCreateFromAnotherBean.codeListValues}"
                                 style="width: 100%; margin-bottom:20px;">
                        <p:column style="width:65px">
                            <f:facet name="header">
                                <h:outputText value="Select"/>
                            </f:facet>
                            <p:selectBooleanButton id="value2" value="#{codeListValue.usedIndicator}"
                                                   disabled="#{codeListValue.disabled}" onLabel="Yes" offLabel="No"
                                                   onIcon="ui-icon-check" offIcon="ui-icon-close" style="width:65px">
                                <p:ajax update="tbl"
                                        listener="#{codeListCreateFromAnotherBean.updateCodeListValue(codeListValue.codeListValueId)}"/>
                            </p:selectBooleanButton>
                        </p:column>

                        <p:column style="width:100px">
                            <f:facet name="header">
                                <h:outputText value="Code"/>
                            </f:facet>
                            <h:outputText value="#{codeListValue.value}"
                                          style="font-weight:bold; color:#{codeListValue.color};"/>
                        </p:column>

                        <p:column style="width:100px">
                            <f:facet name="header">
                                <h:outputText value="Short Name"/>
                            </f:facet>
                            <h:outputText value="#{codeListValue.name}"
                                          style="font-weight:bold; color:#{codeListValue.color};"/>
                        </p:column>

                        <p:column style="width:335px">
                            <f:facet name="header">
                                <h:outputText value="Definition"/>
                            </f:facet>
                            <h:outputText value="#{codeListValue.definition}" style="color:#{codeListValue.color};"/>
                        </p:column>

                        <p:column style="width:400px">
                            <f:facet name="header">
                                <h:outputText value="Definition Source"/>
                            </f:facet>
                            <h:outputText value="#{codeListValue.definitionSource}"
                                          style="color:#{codeListValue.color};"/>
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
                <h:panelGrid columns="2" cellpadding="5">
                    <h:outputText styleClass="search-label" style="font-weight:bold; color: #4078c0" value="Add new Code List Value: "/>
                    <p:commandButton value="Add" icon="ui-icon-extlink"
                                     actionListener="#{codeListCreateFromAnotherBean.addCodeListValue}">
                        <p:ajax event="dialogReturn" listener="#{codeListCreateFromAnotherBean.onCodeListValueAdded}"
                                update=":form:tbl"/>
                    </p:commandButton>
                </h:panelGrid>
                <p:separator/>
                <h:panelGrid id="grid3" columns="3" cellpadding="5">
                    <p:commandButton ajax="true" style="width:100px" icon="ui-icon-search" value="Save"
                                     actionListener="#{codeListCreateFromAnotherBean.save()}"
                                     action="code_lists.xhtml?faces-redirect=true"/>

                    <p:commandButton ajax="true" style="width:100px" icon="ui-icon-search" value="Publish"
                                     actionListener="#{codeListCreateFromAnotherBean.publish()}"
                                     action="code_lists.xhtml?faces-redirect=true"/>

                    <p:commandButton ajax="true" style="width:100px" icon="ui-icon-search" value="Cancel"
                                     action="code_lists.xhtml?faces-redirect=true"/>
                </h:panelGrid>
            </p:panel>
            <input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
        </h:form>
    </ui:define>
</ui:composition>
